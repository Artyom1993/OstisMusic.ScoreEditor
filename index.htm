<!DOCTYPE html>
<html>

<head>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="lib/bootstrap/css/bootstrap.min.css" rel="stylesheet" type="text/css">
    <link rel="stylesheet" href="build/css/main.css">

    <script src="lib/jquery/dist/jquery.js"></script>
    <!--<script src="lib/jquery/jquery.address.js"></script>-->
    <script src="lib/jquery/jquery.hotkeys.js"></script>
    <script src="lib/underscore-min.js"></script>
    <script src="lib/vexflow-min.js"></script>

    <script src="lib/bootstrap/js/bootstrap.min.js"></script>

    <script src="lib/vextab/vextab_parser.js"></script>
    <script src="lib/vextab/vextab.js"></script>
    <script src="lib/vextab/artist.js"></script>

    <script src="lib/midi-js/MIDI.min.js"></script>
    <script src="lib/midi-js/inc/Base64.js" type="text/javascript"></script>
    <script src="lib/midi-js/inc/base64binary.js" type="text/javascript"></script>

    <script src="lib/paper.min.js"></script>
    <script src="lib/vextab/player.js"></script>


    <link rel="stylesheet" href="lib/select2/select2.css">
    <script type="text/javascript" src="lib/select2/select2.js"></script>
    <script src="lib/angular/angular.js"></script>
    <script type="text/javascript" src="lib/angular-ui-select2/src/select2.js"></script>

    <script data-main="js/main" src="lib/requirejs/require.js"></script>
</head>

<body ng-cloak>
<div ng-controller="EditorCtrl as editor">
    <nav class="navbar navbar-default" role="navigation">
        <div class="navbar-header">
            <a class="navbar-brand" href="#">OSTISMusic Score editor</a>
        </div>

        <div class="collapse navbar-collapse">
            <ul class="nav navbar-nav">
                <li class="dropdown" ng-controller="FileCtrl as fileCtrl">
                    <a href="#" class="dropdown-toggle" data-toggle="dropdown">File<b class="caret"></b></a>
                    <ul class="dropdown-menu">
                        <li><a href="#" class="save" ng-click="fileCtrl.saveFile()">Save as...</a></li>
                        <li>
                            <a href="#" class="open" ng-click="fileCtrl.openFile()">Open...</a>
                            <input type="file" id="hiddenFileInput" style="display: none">
                        </li>
                    </ul>
                </li>
                <li ng-class="{disabled: !playerReady}"><a href="#" class="stop"><span class="glyphicon glyphicon-stop"></span> Stop</a></li>
                <li ng-class="{disabled: !playerReady}"><a href="#" class="play"><span class="glyphicon glyphicon-play"></span> Play</a></li>
            </ul>

        </div>
    </nav>
    <div class="row viewport">
        <div class="col-xs-3">
            <ul class="nav nav-tabs">
                <li><a>Instruments</a></li>
            </ul>
            <div class="instruments panel panel-default form-horizontal">

                <div class="instrument" >
                    Tickable type:<br>
                    <div class="tickables btn-group">
                        <button class="tickable note btn btn-default active">Note</button>
                        <button class="tickable rest btn btn-default" >Rest</button>
                    </div>
                </div>

                <div class="instrument" >
                    Duration:<br>
                    <div class="durations btn-group">
                        <button ng-repeat="i in [1,2,4,8,16,32]"
                                class="item btn btn-default {{editor.noteDuration == i ? 'active': ''}}"
                                value="{{i}}"
                                ng-click="editor.setNoteDuration(i)"
                                >{{i}}</button>
                    </div>
                </div>

                <div class="instrument" >
                    Accidentals:<br>
                    <div class="accidentals btn-group">
                        <button class="accidental-sharp item btn btn-default">#</button>
                        <button class="accidental-none item btn btn-default">none</button>
                        <button class="accidental-flat item btn btn-default">b</button>
                    </div>
                </div>

                <div class="instrument" >
                    Instrument:<br>

                <select class="form-control" ng-model="activeTrack.instrument"
                        ng-options="instr.instrument for (index, instr) in editor.getAllInstruments()"></select>
                </div>

                <div class="row instrument">
                    <div class="col-md-6" >
                        Tempo:<br>
                        <input style="width: 100px" type="number" class="form-control" ng-model="song.tempo"/>
                    </div>
                    <div class="col-md-6" >
                        Octave shift:<br>
                        <input style="width: 100px" type="number" class="form-control" ng-model="activeTrack.options.octaveShift"/>
                    </div>
                </div>
            </div>
        </div>
        <div class="view col-xs-9">
            <ul class="nav nav-tabs">
                <li ng-repeat="track in song.tracks"
                    ng-class="{active: activeTrack === track}">
                    <a href="#track{{track.instrument.id}}" ng-click="editor.setActiveTrack(track)">
                        {{track.instrument.instrument}}<span style="margin-left: 8px" class="glyphicon glyphicon-remove"
                            ng-click="editor.removeTrack(track)"></span>
                    </a>

                </li>
                <button class="btn btn-default" style="margin-top: 7px" ng-click="editor.newTrack()">
                    <span class="glyphicon glyphicon-plus"></span>
                </button>
            </ul>
            <div class="canvas-layers panel panel-default"
                 ng-click="editor.selectedInstrument.scoreClick($event)"
                 ng-mousemove="editor.selectedInstrument.mouseMove($event)">
                <canvas id="canvas"></canvas>
                <canvas id='hoverCanvas'></canvas>
                <canvas id='selectionCanvas'></canvas>
            </div>
            <div class="error"></div>
        </div>
    </div>
</div>
</body>

</html>